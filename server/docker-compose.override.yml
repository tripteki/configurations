version: "3"

services:

  memory_commander:

    image: ghcr.io/joeferner/redis-commander:latest

    ports:

      - ${MEMORY_COMMANDER_PORT}:8081

    restart: always

    environment:

      TZ: ${TZ}

      REDIS_HOST: memory
      REDIS_PASSWORD_FILE: /run/secrets/memory
      HTTP_USER: ${DATABASE_USERNAME}
      HTTP_PASSWORD_FILE: /run/secrets/memory

    secrets:

      - memory

    depends_on:

      - memory

  database_mysql_phpmyadmin:

    image: phpmyadmin/phpmyadmin:latest

    ports:

      - ${DATABASE_MYSQL_PHPMYADMIN_PORT}:80

    restart: always

    environment:

      TZ: ${TZ}

      PMA_HOST: database_mysql
      # PMA_CONTROLUSER: ${DATABASE_USERNAME} #
      # PMA_CONTROLPASS_FILE: /run/secrets/database_mysql #
      UPLOAD_LIMIT: 32G

    secrets:

      - database_mysql

    depends_on:

      - database_mysql
